<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>studio</title>
	<!-- Webix Library -->
	<script type="text/javascript" src="/html/assets/webix/webix.js"></script>
	<script type="text/javascript" src="/html/assets/locales/kr_doc.js"></script>
	<script type="text/javascript" src="/html/assets/addition/screenfull.js"></script>
	<script type="text/javascript" src="/html/assets/addition/crypto-js.min.js"></script>
	<script type="text/javascript" src="/html/assets/addition/functions.js"></script>
	<script type="text/javascript" src="/html/assets/addition/defintionOfURL.js"></script>
	<script type="text/javascript" src="/html/assets/addition/sharedComponent.js"></script>
	<!-- Css -->
	<link rel="stylesheet" type="text/css" href="/html/assets/webix/skins/flat.css" />
	<link rel="stylesheet" type="text/css" href="/html/assets/css/MaterialDesign/css/materialdesignicons.min.css" />
	<style>
		.webix_view.webix_el_label.borderR {
			border-right: solid 1px grey !important;
			height: 45px !important;
		}

		.webix_fmanager_card_panel {
			position: relative;
			padding: 10px 12px;
			height: 36px;
			background-color: rgba(0, 0, 0, 0.5);
		}

		.webix_fmanager_card_name {
			display: inline-block;
			white-space: nowrap;
			font-weight: 500;
			width: 155px;
			height: 29px;
			line-height: 30px;
			color: #f8f8f8;
		}

		body.webix_full_screen {
			overflow: scroll;
		}

		.grey .webix_el_box {
			color: #bfbfbf;
		}

        .webix_el_checkbox {
            margin: 0!important;
        }
	</style>
	<style>
		/*disable text selection if needed (otherwise, ignore this part)*/
		.webix_tree_item {
			user-select: none;
			/* standard syntax */
			-webkit-user-select: none;
			/* webkit (safari, chrome) browsers */
			-moz-user-select: none;
			/* mozilla browsers */
			-khtml-user-select: none;
			/* webkit (konqueror) browsers */
			-ms-user-select: none;
			/* IE10+ */
		}

		.webix_tree_item.webix_selected span {
			background: #1F884C !important;
		}
	</style>
	<style>
		.webix_fmanager_card_label {
			position: absolute;
			padding: 4px;
			bottom: 3px;
			left: 3px;
			height: 15px;
			line-height: 15px;
			font-weight: bold;
			color: #475466;
			background-color: rgba(255, 200, 200, 0.8);
			border-radius: 15px;
		}

		.button {
			padding: 10px;
			display: inline;
			border-radius: 2px;
			font-family: "Arial";
			border: 0;
			margin: 0 10px;
			background: red;
			font-size: 15px;
			line-height: 15px;
			color: white;
			width: auto;
			height: auto;
			box-sizing: content-box;
		}
	</style>
	<style>
		.custom_blockarea {
			position: fixed;
			border: 2px solid #5210ec;
			background-color: rgba(230, 120, 17, 0.2);
		}
	</style>
	<style>
		.overall {
			height: 100%;
			line-height: 26px;
		}

		.name {
			height: 100%;
			width: 280px;
			float: left;
			overflow: hidden;
		}

		.size {
			padding: 0 10px;
			width: 100px;
			text-align: right;
			float: right;
		}

		.remove_file {
			float: right;
			width: 15px;
			padding-left: 10px;
		}

		.status {
			float: right;
			position: relative;
			margin-top: 4px;
			width: 180px;
			height: 16px;
			line-height: 16px;
			border: 1px solid #A4BED4;
			border-radius: 2px;
			-moz-border-radius: 2px;
			-webkit-border-radius: 2px;
		}

		.progress {
			height: 100%;
			position: absolute;
			background-color: #0899e7;
			margin: 0px, 0px, 0px, 0px;
			border: 0px, 0px, 0px, 0px;
		}

		.message {
			z-index: 1;
			width: 100%;
			text-align: center;
			position: absolute;
		}

		.message.error {
			color: #e83b3b;
		}
	</style>
	<style>
		.messages-list .webix_list_item {
			display: flex;
			max-width: 80%;
		}

		.messages-list .webix_list_item.webix_comments_current {
			margin-left: 20%;
		}

		.messages-list .webix_list_item:last-child {
			margin-bottom: 24px;
		}

		.messages-list .message {
			flex-grow: 1;
			/* background: #f4f5f9; */
			background: #5c5b5b;
			border-radius: 0px 8px 8px 8px;
			padding: 10px 20px 20px;
		}

		.messages-list .webix_comments_message {
			margin: 0;
		}

		.messages-list .webix_chat_list_avatar {
			flex-shrink: 0;
			margin-right: 15px;
			margin-left: 15px;
		}

		.messages-list .webix_comments_name {
			margin-left: 0;
		}
	</style>
	<style>
		.webix_fmanager_prompt .webix_win_head .webix_toolbar {
			/* background: #ffffff; */
			background: #3a3939;
		}
	</style>
	<style>
		html,
		body {
			background-color: #ffffff;

		}

		.content {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.image .webix_template {
			position: relative;
			background: #aaa;
			/* padding: 50px 60px; */
			padding: 0px;
		}

		.title {
			position: absolute;
			left: 10px;
			bottom: 15px;
			color: #000;
			font-size: 16px;
		}
	</style>
	<style>
		.webix_dataview .webix_scroll_cont {
			padding: 0px !important;
		}
	</style>
	<style>
		/* for templates */
		.draft .webix_template {
			display: table;
			width: 100%;
		}

		.draft .webix_template .title1 {
			display: table-cell;
			text-align: center;
			vertical-align: middle;
			font-size: 24px;
		}
	</style>
	<style>
		/* dashboard and panels */
		.panel_drag_view {
			border-radius: 2px;
			box-shadow: 0px 0px 10px #b9d4fa;
		}

		.panel_icon {
			color: #283655;
		}

		.panel_target {
			background: #d0e1f9ab;
			box-shadow: 0px 0px 20px 5px #d0e1f9ab;
		}

		.draft .webix_template {
			display: table;
			width: 100%;
		}

		.draft .webix_template .title {
			display: table-cell;
			text-align: center;
			vertical-align: middle;
			font-size: 24px;
		}

		.webix_view.webix_flexlayout {
			height: auto !important;
		}
	</style>
	<style>
		.webix_el_slider .webix_el_box,
		.webix_el_slider {
			height: 50px !important;
		}

		.female-feed .webix_slider_title {
			color: white;
			background-color: orange;
			width: 22px;
			height: 22px;
			border-radius: 50% 50%;
			border-color: transparent;
			text-align: center;
			align-items: center;
			font-size: 12px;
		}

		.male-feed .webix_slider_title {
			color: white;
			background-color: blue;
			width: 22px;
			height: 22px;
			border-radius: 50% 50%;
			border-color: transparent;
			text-align: center;
			align-items: center;
			font-size: 12px;
		}

		.female-feed .webix_slider_box .webix_slider_left {
			background: orange !important;
		}

		.male-feed .webix_slider_box .webix_slider_left {
			background: blue !important;
		}
	</style>
</head>

<body class="webix_full_screen" oncontextmenu="return false">
    <div id="template_container" hidden>
        <div class='overall'>
          <div class='name'>#code#.</div>
          <div class='date'>#date#</div>
          <div class='invetory'>#in_qnty# * #unit_price#</div>
          <div class='amount'>#in_qnty# * #unit_price#</div>
          <div class='edit_icon'>edit</div>
          <div class='delete_icon'>delete</div>
        </div>
    </div>
</body>
<script>
    const big_film_set = [{"id":1,"title":"The Shawshank Redemption","year":"1994","votes":"678,79","rating":"9,2","rank":"1"},{"id":2,"title":"The Godfather","year":"1972","votes":"511,495","rating":"9,2","rank":"2"},{"id":3,"title":"The Godfather: Part II","year":"1974","votes":"319,352","rating":"9","rank":"3"},{"id":4,"title":"The Good, the Bad and the Ugly","year":"1966","votes":"213,03","rating":"8,9","rank":"4"},{"id":5,"title":"My Fair Lady","year":"1964","votes":"533,848","rating":"8,9","rank":"5"},{"id":6,"title":"12 Angry Men","year":"1957","votes":"164,558","rating":"8,9","rank":"6"},{"id":7,"title":"Schindler's List","year":"1993","votes":"355,638","rating":"8,9","rank":"7"},{"id":8,"title":"One Flew Over the Cuckoo's Nest","year":"1975","votes":"283,176","rating":"8,8","rank":"8"},{"id":9,"title":"The Dark Knight","year":"2008","votes":"612,37","rating":"8,8","rank":"9"},{"id":10,"title":"The Lord of the Rings: The Return of the King","year":"2003","votes":"472,843","rating":"8,8","rank":"10"},{"id":11,"title":"Star Wars: Episode V - The Empire Strikes Back","year":"1980","votes":"348,012","rating":"8,8","rank":"11"},{"id":12,"title":"Inception","year":"2010","votes":"458,693","rating":"8,8","rank":"12"},{"id":13,"title":"Fight Club","year":"1999","votes":"507,723","rating":"8,8","rank":"13"},{"id":14,"title":"Seven Samurai","year":"1954","votes":"118,925","rating":"8,8","rank":"14"},{"id":15,"title":"Goodfellas","year":"1990","votes":"299,349","rating":"8,7","rank":"15"},{"id":16,"title":"The Lord of the Rings: The Fellowship of the Rin","year":"2001","votes":"494,003","rating":"8,7","rank":"16"},{"id":17,"title":"Star Wars","year":"1977","votes":"393,087","rating":"8,7","rank":"17"},{"id":18,"title":"City of God","year":"2002","votes":"222,818","rating":"8,7","rank":"18"},{"id":19,"title":"Casablanca","year":"1942","votes":"202,051","rating":"8,7","rank":"19"},{"id":20,"title":"Once Upon a Time in the West","year":"1968","votes":"97,931","rating":"8,7","rank":"20"},{"id":21,"title":"The Matrix","year":"1999","votes":"492,325","rating":"8,7","rank":"21"},{"id":22,"title":"Rear Window","year":"1954","votes":"148,162","rating":"8,7","rank":"22"},{"id":23,"title":"Raiders of the Lost Ark","year":"1981","votes":"300,252","rating":"8,7","rank":"23"},{"id":24,"title":"The Silence of the Lambs","year":"1991","votes":"324,419","rating":"8,7","rank":"24"},{"id":25,"title":"The Usual Suspects","year":"1995","votes":"331,99","rating":"8,7","rank":"25"},{"id":26,"title":"Psycho","year":"1960","votes":"182,319","rating":"8,6","rank":"26"},{"id":27,"title":"Se7en","year":"1995","votes":"380,479","rating":"8,6","rank":"27"},{"id":28,"title":"Forrest Gump","year":"1994","votes":"416,066","rating":"8,6","rank":"28"},{"id":29,"title":"The Lord of the Rings: The Two Towers","year":"2002","votes":"423,855","rating":"8,6","rank":"29"},{"id":30,"title":"It's a Wonderful Life","year":"1946","votes":"126,537","rating":"8,6","rank":"30"},{"id":31,"title":"Memento","year":"2000","votes":"358,354","rating":"8,6","rank":"31"},{"id":32,"title":"Leon: The Professional","year":"1994","votes":"274,245","rating":"8,6","rank":"32"},{"id":33,"title":"Sunset Blvd.","year":"1950","votes":"68,932","rating":"8,6","rank":"33"},{"id":34,"title":"Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb","year":"1964","votes":"185,368","rating":"8,6","rank":"34"},{"id":35,"title":"Apocalypse Now","year":"1979","votes":"214,205","rating":"8,6","rank":"35"},{"id":36,"title":"American History X","year":"1998","votes":"305,747","rating":"8,5","rank":"36"},{"id":37,"title":"North by Northwest","year":"1959","votes":"112,951","rating":"8,5","rank":"37"},{"id":38,"title":"Citizen Kane","year":"1941","votes":"163,906","rating":"8,5","rank":"38"},{"id":39,"title":"Terminator 2: Judgment Day","year":"1991","votes":"309,922","rating":"8,5","rank":"39"},{"id":40,"title":"Toy Story 3","year":"2010","votes":"173,833","rating":"8,5","rank":"40"},{"id":41,"title":"American Beauty","year":"1999","votes":"369,318","rating":"8,5","rank":"41"},{"id":42,"title":"Saving Private Ryan","year":"1998","votes":"349,866","rating":"8,5","rank":"42"},{"id":43,"title":"Taxi Driver","year":"1976","votes":"207,461","rating":"8,5","rank":"43"},{"id":44,"title":"Alien","year":"1979","votes":"227,723","rating":"8,5","rank":"44"},{"id":45,"title":"Spirited Away","year":"2001","votes":"142,366","rating":"8,5","rank":"45"},{"id":46,"title":"City Lights","year":"1931","votes":"38,898","rating":"8,5","rank":"46"},{"id":47,"title":"Vertigo","year":"1958","votes":"113,232","rating":"8,5","rank":"47"},{"id":48,"title":"The Shining","year":"1980","votes":"236,782","rating":"8,5","rank":"48"},{"id":49,"title":"Paths of Glory","year":"1957","votes":"56,418","rating":"8,5","rank":"49"},{"id":50,"title":"Am?lie","year":"2001","votes":"237,208","rating":"8,5","rank":"50"},{"id":51,"title":"The Pianist","year":"2002","votes":"181,523","rating":"8,5","rank":"51"},{"id":52,"title":"M","year":"1931","votes":"49,827","rating":"8,5","rank":"52"},{"id":53,"title":"WALLE","year":"2008","votes":"257,704","rating":"8,5","rank":"53"},{"id":54,"title":"Double Indemnity","year":"1944","votes":"46,968","rating":"8,5","rank":"54"},{"id":55,"title":"The Departed","year":"2006","votes":"347,565","rating":"8,4","rank":"55"},{"id":56,"title":"The Lives of Others","year":"2006","votes":"104,228","rating":"8,4","rank":"56"},{"id":57,"title":"A Clockwork Orange","year":"1971","votes":"244,189","rating":"8,4","rank":"57"},{"id":58,"title":"Lawrence of Arabia","year":"1962","votes":"95,054","rating":"8,4","rank":"58"},{"id":59,"title":"Aliens","year":"1986","votes":"212,588","rating":"8,4","rank":"59"},{"id":60,"title":"To Kill a Mockingbird","year":"1962","votes":"101,352","rating":"8,4","rank":"60"},{"id":61,"title":"Modern Times","year":"1936","votes":"48,296","rating":"8,4","rank":"61"},{"id":62,"title":"Life Is Beautiful","year":"1997","votes":"146,411","rating":"8,4","rank":"62"},{"id":63,"title":"Requiem for a Dream","year":"2000","votes":"243,963","rating":"8,4","rank":"63"},{"id":64,"title":"Eternal Sunshine of the Spotless Mind","year":"2004","votes":"286,331","rating":"8,4","rank":"64"},{"id":65,"title":"Das Boot","year":"1981","votes":"85,191","rating":"8,4","rank":"65"},{"id":66,"title":"Back to the Future","year":"1985","votes":"270,029","rating":"8,4","rank":"66"},{"id":67,"title":"Reservoir Dogs","year":"1992","votes":"271,098","rating":"8,4","rank":"67"},{"id":68,"title":"The Third Man","year":"1949","votes":"60,907","rating":"8,4","rank":"68"},{"id":69,"title":"L.A. Confidential","year":"1997","votes":"203,259","rating":"8,4","rank":"69"},{"id":70,"title":"The Prestige","year":"2006","votes":"291,029","rating":"8,4","rank":"70"},{"id":71,"title":"Chinatown","year":"1974","votes":"98,824","rating":"8,4","rank":"71"},{"id":72,"title":"The Treasure of the Sierra Madre","year":"1948","votes":"40,617","rating":"8,4","rank":"72"},{"id":73,"title":"Cinema Paradiso","year":"1988","votes":"59,743","rating":"8,4","rank":"73"},{"id":74,"title":"The Green Mile","year":"1999","votes":"271,474","rating":"8,4","rank":"74"},{"id":75,"title":"Monty Python and the Holy Grail","year":"1974","votes":"188,389","rating":"8,3","rank":"75"},{"id":76,"title":"Once Upon a Time in America","year":"1984","votes":"94,351","rating":"8,3","rank":"76"},{"id":77,"title":"The Great Dictator","year":"1940","votes":"49,085","rating":"8,3","rank":"77"},{"id":78,"title":"Rashomon","year":"1950","votes":"49,623","rating":"8,3","rank":"78"},{"id":79,"title":"Raging Bull","year":"1980","votes":"112,361","rating":"8,3","rank":"79"},{"id":80,"title":"Gladiator","year":"2000","votes":"372,697","rating":"8,3","rank":"80"},{"id":81,"title":"Some Like It Hot","year":"1959","votes":"83,549","rating":"8,3","rank":"81"},{"id":82,"title":"Amadeus","year":"1984","votes":"122,177","rating":"8,3","rank":"82"},{"id":83,"title":"Full Metal Jacket","year":"1987","votes":"198,428","rating":"8,3","rank":"83"},{"id":84,"title":"Singin' in the Rain","year":"1952","votes":"68,547","rating":"8,3","rank":"84"},{"id":85,"title":"All About Eve","year":"1950","votes":"42,339","rating":"8,3","rank":"85"},{"id":86,"title":"Bicycle Thieves","year":"1948","votes":"37,003","rating":"8,3","rank":"86"},{"id":87,"title":"The Bridge on the River Kwai","year":"1957","votes":"72,819","rating":"8,3","rank":"87"},{"id":88,"title":"Pan's Labyrinth","year":"2006","votes":"205,065","rating":"8,3","rank":"88"},{"id":89,"title":"Braveheart","year":"1995","votes":"309,611","rating":"8,3","rank":"89"},{"id":90,"title":"2001: A Space Odyssey","year":"1968","votes":"196,549","rating":"8,3","rank":"90"},{"id":91,"title":"Metropolis","year":"1927","votes":"51,421","rating":"8,3","rank":"91"},{"id":92,"title":"Oldboy","year":"2003","votes":"133,645","rating":"8,3","rank":"92"},{"id":93,"title":"The Apartment","year":"1960","votes":"47,052","rating":"8,3","rank":"93"},{"id":94,"title":"Unforgiven","year":"1992","votes":"128,601","rating":"8,3","rank":"94"},{"id":95,"title":"Downfall","year":"2004","votes":"110,171","rating":"8,3","rank":"95"},{"id":96,"title":"The Sting","year":"1973","votes":"82,181","rating":"8,3","rank":"96"},{"id":97,"title":"Star Wars: Episode VI - Return of the Jedi","year":"1983","votes":"267,993","rating":"8,3","rank":"97"},{"id":98,"title":"Inglourious Basterds","year":"2009","votes":"277,969","rating":"8,3","rank":"98"},{"id":99,"title":"Princess Mononoke","year":"1997","votes":"86,032","rating":"8,3","rank":"99"},{"id":100,"title":"Indiana Jones and the Last Crusade","year":"1989","votes":"217,054","rating":"8,3","rank":"100"},{"id":101,"title":"Mr. Smith Goes to Washington","year":"1939","votes":"40,325","rating":"8,3","rank":"101"},{"id":102,"title":"The Elephant Man","year":"1980","votes":"75,735","rating":"8,3","rank":"102"},{"id":103,"title":"Up","year":"2009","votes":"190,499","rating":"8,3","rank":"103"}];

	const user = JSON.parse(sessionStorage.getItem("user"));
    const menu_data = [
        {
            id: "dashboard", icon: "mdi mdi-view-dashboard", value: "main", data: [
                { id: "dashboard1", value: "Dashboard " },
            ]
        },
        {
            id: "uis", icon: "mdi mdi-puzzle", value: "Management Farm", data: [
                { id: "register-farm", value: "register farm"},
                { id: "register-breed", value: "register breed"},
                { id: "register-worker", value: "register worker"},
                { id: "register-nutri", value: "register nutri"},
                { id: "register-food", value: "register food"},
            ]
        },
        {
            id: "manage-breed", icon: "mdi mdi-table", value: "Management Breed", data: [
                { id: "manage-feed", value: "manage feed"},
                { id: "supply-water", value: "Supply water"},
            ]
        },
    ];
	const sidebar = {
		view: "sidebar",
        id: "menu_list",
		data: menu_data,
        scroll: "auto",
		ready: function () {
			this.select("dashboard1");
			this.open(this.getParentId("dashboard1"));
		},
		on: {
			onAfterSelect: function (id) {
                $$("multi").setValue(id)
                sessionStorage.setItem("lastPage", id);

                const farms = JSON.parse(sessionStorage.getItem("farms"));

				$$("multi").setValue(id)
                sessionStorage.setItem("lastPage", id);
                
                switch (id) {
                    case "register-breed":
                        if (farms && farms.length > 0) {
                            const user_group_idx = sessionStorage.getItem("user_group_idx");
                            if (farms.length > 1) {
                                var farms_value = [];
                                farms.forEach(farm => {
                                    farms_value.push({
                                        id: farm.id,
                                        title: farm.farm_name
                                    })
                                });
                                $$("farms").define("data", farms_value);
                                if (!user_group_idx) {
                                    farm_select_win.show();
                                }
                            } else {
                                sessionStorage.setItem("user_group_idx", farms[0].id);
                            }
                        } else {
                            webix.alert({
                                title:"Warning!",
                                text:"You don't have any farms. please register farm first!",
                                type:"alert-warning"
                            })
                            .then(function(result){
                                $$("menu_list").select("register-farm");
			                    $$("menu_list").open($$("menu_list").getParentId("register-farm"));
                            })
                        }
                        break;
                
                    default:
                        break;
                }

			}
		}
	};
    const farm_select_win = webix.ui({
        view:"window",
        id:"farm_select_win",
        modal: true,
        move: true,
        position: "center",
        responsive: "a1",
        elementsConfig: { labelPosition: "left", },
        head: {
            view: "toolbar",
            elements: [
                {
                    view: "label",
                    label: "Select a group",
                    align: "center",
                },
                { 
                    view: "icon",
                    icon: "wxi-close",
                    hotkey: "esc",
                    width: 40,
                    click: function () {
                        $$("farm_select_win").hide();
                    },
                },
            ],
        },
        body:{
            view: "form",
            id: "farm_select_form",
            elementsConfig: {
                bottomPadding: 18,
                labelWidth: 100,
            },
            css: {
                margin: "auto!important",
            },
            elements: [
                { 
                    view:"list", template:"#title#", id: "farms", width: 250, height: 200, select: true
                },
                {
                    view: "button", value: "Select", css: "webix_primary",
                    click: function() {
                        var farm = $$("farms").getSelectedId();
                        sessionStorage.setItem("user_group_idx", farm);
                        this.getTopParentView().hide();
                        refresh_breed_grid();
                    }
                }
            ],
        },
    });
    
    // ----------- Register Farm page Start ----------------
    const neccessary_label = {
        view: "label",
        label: "Farm information",
        id: "label_a",
        css: {
            color: "grey",
            "border-bottom": "1px solid!important"
        }
    };
    const save_farm_button = {
        view: "button",
        label: "Save",
        id: "save_farm_button",
        gravity: 0.2,
        click: function () {
            var form = $$('register-farm')
            if (form.validate()) {
                $$("avatar").send(function() {
                    const val = form.getValues();
                    webix.ajax().post(schedulerUrl + 'farms/register', {
                        farm_code: val.farm_code1,
                        vete_code: val.farm_code2,
                        business_code: val.business_code,
                        farm_name: val.farm_name,
                        farm_addr1: val.farm_address,
                        farm_addr2: val.farm_address2,
                        owner_idx: user.id,
                        owned: val.ownership,
                        farm_kind: val.kind_farm,
                        employee_domes: val.employee_domestic,
                        employee_forign: val.employee_foreigner,
                        partner_company: val.partner,
                        farm_breed: "",
                        window_type: val.windows,
                        wast_type: val.carridor,
                        building_num: val.building_num,
                        building_type: val.kind_building,
                        outer_type: val.outer,
                        permission_date: val.permission_date,
                        capacity_breed: val.capacity_breed,
                        is_ict: val.is_ict,
                        avatar: val.avatar
                    }).then(function (data) {
                        if (data.text() != "") {
                            webix.alert({ title: "Register Farm", type: "alert-success", text: "Register a farm successfully!" }).then(function() {
                                webix.confirm("Do you want to add more farms?", "confirm-warning")
                                .then(function(result){
                                    window.location.href = "register-farm";
                                })
                                .fail(function(){
                                    sessionStorage.setItem("user_group_idx", data.text());

                                    webix.ajax().get(schedulerUrl + "farms/breeds", { uID: user.id, fID: data.text() }).then(function(data){
                                        if (parseInt(data.text()) > 0) {
                                            sessionStorage.setItem("breedID", data.text())
                                        } else {
                                            window.location.href = "register-breed"
                                        }
                                    })
                                });
                            })
                        }
                        else {
                            webix.alert({ title: "Some input values are not Correct \n Please try again", type: "alert-warning" })
                        }
                    });
                });
            }
        }
    }
    const farm_code1_input = {
        view: "text",
        type: "text",
        name: "farm_code1",
        label: "Farm code1",
        id: "farm_code1",
        placeholder: "Enter Farm code1",
        required: true,
        validate: webix.rules.isNotEmpty,
        invalidMessage: "Please enter your farm code1!",
        on: {
            "onBlur": function () {
                var result = this.validate()
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("farm_code2").focus();
                }

            }
        },
    };
    const farm_code2_input = {
        view: "text",
        type: "text",
        name: "farm_code2",
        label: "Farm code2",
        id: "farm_code2",
        placeholder: "Enter Farm code2",
        required: true,
        validate: webix.rules.isNotEmpty,
        invalidMessage: "Please enter your farm code2!",
        on: {
            "onBlur": function () {
                var result = this.validate()
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("farm_name").focus();
                }

            }
        },
    };
    const farm_name_input = {
        view: "text",
        type: "text",
        name: "farm_name",
        label: "Farm name",
        id: "farm_name",
        placeholder: "Enter Farm name",
        required: true,
        validate: webix.rules.isNotEmpty,
        invalidMessage: "Please enter your farm name!",
        on: {
            "onBlur": function () {
                var result = this.validate()
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("kind_farm").focus();
                }

            }
        },
    };
    const kind_farm = {
        view: "richselect",
        label: "Kind of Farm",
        name: "kind_farm",
        id: "kind_farm",
        required: true,
        value: 1, options: [
            { "id": 1, "value": "farm 1" },
            { "id": 2, "value": "farm 2" },
            { "id": 3, "value": "farm 3" }
        ],
    }
    const farm_address_label = {
        view: "label",
        label: "Farm Address *",
        width: 120
    }
    const farm_address = {
        cols: [
            {
                view: "text",
                type: "text",
                name: "farm_address",
                id: "farm_address",
                placeholder: "Enter Farm address",
                required: true,
                validate: webix.rules.isNotEmpty,
                invalidMessage: "Please enter farm address!",
                validateEvent: "key",
                on: {
                    "onBlur": function () {
                        this.validate()
                    },
                    "onKeyPress": function (key, e) {
                        if (key == 13) {
                            $$("farm_address2").focus();
                        }
                    }
                },
            },
            {
                rows: [
                    {
                        view: "button",
                        name: "search",
                        label: "search",
                        id: "search",
                        on: {
                            "onClick": function () {
                                this.validate()
                            },
                        },
                        css: "webix_primary",
                        width: 100,
                    }, {}
                ]

            }
        ],
    };
    const farm_address2_input = {
        view: "text",
        type: "text",
        name: "farm_address2",
        label: "Farm Address2",
        id: "farm_address2",
        placeholder: "Enter Farm address",
        required: true,
        validate: webix.rules.isNotEmpty,
        invalidMessage: "Please enter your farm address!",
        on: {
            "onBlur": function () {
                var result = this.validate()
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("building_num").focus();
                }

            }
        },
    };
    const ownership = {
        view: "radio",
        name: "ownership",
        id: "ownership",
        label: "Onwership",
        value: 1, options: [
            { "id": 1, "value": "own" },
            { "id": 2, "value": "lease" }
        ]
    }
    const building_num_input = {
        view: "text",
        type: "text",
        name: "building_num",
        label: "Building Number",
        id: "building_num",
        attributes:{type:"number"},
        placeholder: "Enter Building Number",
        required: true,
        validate: webix.rules.isNumber,
        invalidMessage: "Please enter your building number!",
        on: {
            "onBlur": function () {
                var result = this.validate()
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("partner").focus();
                }

            }
        },
    };
    const employees = {
        cols: [
            { view: "label", label: "Employees" },
            {
                view: "select",
                name: "employee_domestic",
                value: 1, options: [
                    { "id": 1, "value": "domestic" },
                    { "id": 2, "value": "5" },
                    { "id": 3, "value": "10" },
                    { "id": 4, "value": "20" },
                ],
                inputAlign: "right"
            },
            {
                view: "select",
                name: "employee_foreigner",
                value: 1, options: [
                    { "id": 1, "value": "foreigner" },
                    { "id": 2, "value": "5" },
                    { "id": 3, "value": "10" },
                    { "id": 4, "value": "20" },
                ],
                inputAlign: "right"
            },
        ]
    }
    const partner_input = {
        view: "text",
        type: "text",
        name: "partner",
        label: "Partner",
        id: "partner",
        placeholder: "Enter partner",
        required: true,
        validate: webix.rules.isNotEmpty,
        invalidMessage: "Please enter your partner!",
        on: {
            "onBlur": function () {
                var result = this.validate()
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("business_code").focus();
                }

            }
        },
    };
    const windows = {
        view: "radio",
        name: "windows",
        id: "windows",
        label: "Windows",
        value: 1, options: [
            { "id": 1, "value": "no" },
            { "id": 2, "value": "yes" },
            { "id": 3, "value": "both" },
        ],
    }
    const carridor = {
        view: "radio",
        name: "carridor",
        id: "carridor",
        label: "Carridor (Roof)",
        value: 1, options: [
            { "id": 1, "value": "yes" },
            { "id": 2, "value": "no" },
            { "id": 3, "value": "both" },
        ],
    }
    const photo = {
        view:"photo",
        name:"photo",
        css:"form_photo",
        id:"form_photo",
        value: "/html/assets/img/avatar.png",
        height:150,
        width:150
    };
    const user_avatar = {
        cols:[
            { view: "label", label: "Photo", width: 120 },
            photo,
            { width: 120 },
            {
                rows: [
                    {
                        view: "label",
                        label: user ? user.user_name: ""
                    },
                    {},
                    {
                        cols: [
                            {
                                view:"uploader", id: "avatar", name: "avatar", value:"Upload", accept:"image/*", autosend:false, autowidth:true, multiple:false, width:200, 
                                upload: schedulerUrl + "farms/avatar",
                                on:{        
                                    onAfterFileAdd: function(upload){        
                                        var file = upload.file;
                                        var reader = new FileReader(); 

                                        reader.onload = function(event) {
                                            $$("form_photo").setValue(event.target.result);
                                        };           
                                        reader.readAsDataURL(file)
                                        return false;
                                    },
                                    onUploadComplete: function(response) {
                                    }
                                },
                            }, 
                            { view: "button", label: "delete" , click: function() {
                                webix.confirm("Do you really want to delete it?", "confirm-warning")
                                .then(function(result){
                                    $$("form_photo").setValue("/html/assets/img/avatar.png");
                                })
                                .fail(function(){
                                });
                            }},
                        ]
                    },
                    {}
                ],
            },
        ]
    };
    function showForm(winId, node) {
        $$(winId).getBody().clear();
        $$(winId).show(node);
        $$(winId).getBody().focus();
    }
    const password = {
        cols: [
            {
                view: "label",
                label: "Password *",
                gravity: 0.4
            },
            {
                view: "button",
                label: "Change Password",
                click: function (id, event) {
                    showForm("change_password")
                }
            },
            {}
        ]

    };
    const business_code_input = {
        view: "text",
        type: "text",
        name: "business_code",
        label: "Business code",
        id: "business_code",
        placeholder: "Enter Business Code",
        required: true,
        validate: webix.rules.isNotEmpty,
        invalidMessage: "Please enter your Business Code!",
        on: {
            "onBlur": function () {
                var result = this.validate()    
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("kind_hen").focus();
                }

            }
        },
    };
    const kind_hen = {
        view: "richselect",
        label: "Kind of hen",
        name: "kind_hen",
        id: "kind_hen",
        required: true,
        value: 1, options: [
            { "id": 1, "value": "kind 1" },
            { "id": 2, "value": "kind 2" },
            { "id": 3, "value": "kind 3" }
        ],
    }
    const kind_building = {
        view: "radio",
        name: "kind_building",
        id: "kind_building",
        label: "Kind of building",
        value: 1, options: [
            { "id": 1, "value": "normal" },
            { "id": 2, "value": "pannel" },
            { "id": 3, "value": "textile" },
        ],
    }
    const outer = {
        view: "radio",
        name: "outer",
        id: "ourter",
        label: "Outer (Roof)",
        value: 1, options: [
            { "id": 1, "value": "yes" },
            { "id": 2, "value": "no" },
            { "id": 3, "value": "both" },
        ],
    }
    const permission_date = {
        view:"datepicker", 
        name: "permission_date",
        value: new Date(2012, 6, 8), 
        label: "Permission Date", 
        timepicker: false,
    };
    const capacity_breed = {
        view: "text",
        type: "text",
        name: "capacity_breed",
        label: "Capacity Breed",
        id: "capacity_breed",
        placeholder: "Enter Capacity Breed",
        required: true,
        validate: webix.rules.isNotEmpty,
        attributes: {type: "number"},
        invalidMessage: "Please enter your Capacity Breed!",
        on: {
            "onBlur": function () {
                var result = this.validate()    
            },
            "onKeyPress": function (key, e) {
                if (key == 13) {
                    $$("is_ict").focus();
                }

            }
        },
    };
    const is_ict = {
        view: "switch", 
        name: "is_ict",
        value: 1, 
        label:"ICT",
    };
    const change_password_form = {
        view: "form",
        borderless: true,
        elements: [
            { view: "text", type: "password", label: 'Using Password', name: "current_password", id: "current_password", invalidMessage: "please input current password!" },
            { view: "text", type: "password", label: 'New Password', name: "new_password", id: "new_password", invalidMessage: "please input new password!"},
            { view: "text", type: "password", label: 'Confirm Password', name: "confirm_password", id: "confirm_password", invalidMessage: "please input new password correct!"},
            {
                cols: [
                    {
                        view: "button", value: "Save", id: "submit_btn", click: function () {
                            if (this.getParentView().getParentView().validate()) { 
                                const form_value = this.getParentView().getParentView().getValues();

                                webix.ajax().post(schedulerUrl + 'users/' + user.user_id + '/changePassword', {
                                    current_password: form_value.current_password,
                                    new_password: form_value.new_password
                                }).then(function(res) {
                                    switch (res.text()) {
                                        case "error":
                                            webix.alert("Your current password is incorrect! please try again!","alert-error");
                                            break;
                                        case "success":
                                            webix.alert("Your current password is changed!","alert-success").then(function(result){
                                                $$("submit_btn").getTopParentView().hide();
                                            });
                                            
                                            break;
                                    }
                                })
                            }
                        }
                    },
                    {
                        view: "button", value: "Cancel", click: function () {
                            this.getTopParentView().hide(); 
                        }
                    }
                ]
            }
        ],
        rules: {
            current_password: webix.rules.isNotEmpty,
            new_password: webix.rules.isNotEmpty,
            confirm_password:function(value){
                if ( value == "" || value != $$("new_password").getValue()){
                    return false;
                }
                return true;
            }
        },
        elementsConfig: {
            labelPosition: "top",
        }
    };
    webix.ui({
        view: "window",
        id: "change_password",
        position: "center",
        modal: true,
        close: true,
        head: "Change Password",
        body: webix.copy(change_password_form)
    });
    const register_farm_page = {
        view: "form",
        id: "register-farm",
        elementsConfig: {
            bottomPadding: 18,
            labelWidth: 130,
            padding: 10
        },
        elements: [

            {
                cols: [
                    neccessary_label,
                    save_farm_button
                ]
            },
            {
                cols: [
                    {
                        rows: [
                            farm_code1_input,
                            farm_code2_input,
                            farm_name_input,
                            kind_farm,
                            {
                                cols: [
                                    farm_address_label,
                                    farm_address
                                ]
                            },
                            farm_address2_input,
                            ownership,
                            building_num_input,
                            employees,
                            partner_input,
                            windows,
                            carridor
                        ],
                    },
                    {
                        rows: [
                            user_avatar,
                            password,
                            business_code_input,
                            kind_hen,
                            kind_building,
                            outer,
                            permission_date,
                            capacity_breed,
                            is_ict
                        ],
                    },
                ]
            },
            {}
        ]
    };
    // ----------- Register Farm page End ----------------
    // ----------- Register Breed page Start ----------------
    const breed_details = webix.ui({
        view:"window",
        id:"breed_details",
        modal: true,
        move: true,
        position: "center",
        responsive: "a1",
        scroll: true,
        borderless	: 	true,
        autowidth: true,
        width: 1500,
        height: 800,
        elementsConfig: { labelPosition: "left", },
        head: {
            view: "toolbar",
            elements: [
                {
                    view: "label",
                    label: "Breed Details",
                    align: "center",
                },
                { 
                    view: "icon",
                    icon: "wxi-close",
                    hotkey: "esc",
                    width: 40,
                    click: function () {
                        $$("breed_details").hide();
                    },
                },
            ],
        },
        body:{
            view: "form",
            id: "breed_form",
            scroll: true,
            elementsConfig: {
                bottomPadding: 18,
                labelWidth: 100,
            },
            css: {
                margin: "auto!important",
            },
            elements: [
                {view: "label", label: "farm information"},
                {
                    cols: [
                        {
                            rows: [
                                {view: "text", label: "Farm Name", id: "breed_farm_name", name: "breed_farm_name", readonly:true},
                                {view: "text", label: "Province", id: "breed_province", name: "breed_province", readonly:true},
                                {view: "text", label: "Mobile", id: "mobile", name: "mobile", readonly:true},
                                {view: "text", label: "User ID", id: "user_id", name: "user_id", readonly:true},
                                {view: "text", label: "Office", id: "office", name: "office", readonly:true},
                            ]
                        },
                        {
                            rows: [
                                {view: "text", label: "Owner Name", id: "owner_name", name: "owner_name", readonly:true},
                                {view: "text", label: "Onwer Addr", id: "owner_addr", name: "owner_addr", readonly:true},
                                {view: "text", label: "Number Of Building", id: "building_num1", name: "building_num", readonly:true},
                                {view: "text", label: "Password", id: "password", name: "password", readonly:true},
                            ]
                        }
                    ]
                },
                {view: "label", label: "breed information"},
                {
                    cols: [
                        {
                            rows: [
                                {view: "text", label: "partner", id: "breed_partner", name: "breed_partner", readonly:true},
                                {view: "text", label: "Female Head", id: "breed_female_head", name: "breed_female_head", readonly:true},
                            ]
                        },
                        {
                            rows: [
                                {view: "text", label: "Start date", id: "breed_start_date", name: "breed_start_date", readonly:true},
                                {view: "text", label: "Male Head", id: "breed_male_head", name: "breed_male_head", readonly:true},
                            ]
                        },
                        {
                            rows: [
                                {view: "text", label: "Bio Type", id: "breed_biotype", name: "breed_biotype", readonly:true},
                                {view: "text", label: "Start Weekage", id: "breed_start_weekage", name: "breed_start_weekage", readonly:true},
                            ]
                        },
                    ]
                },
                {
                    cols: [
                        {
                            rows: [
                                {view: "text", label: "Female building1", id: "fe_building1", name: "fe_building1"},
                                {view: "text", label: "Female building2", id: "fe_building2", name: "fe_building2"},
                                {view: "text", label: "Female building3", id: "fe_building3", name: "fe_building3"},
                                {view: "text", label: "Female building4", id: "fe_building4", name: "fe_building4"},
                                {view: "text", label: "Female building5", id: "fe_building5", name: "fe_building5"},
                                {view: "text", label: "Female building6", id: "fe_building6", name: "fe_building6"},
                                {view: "text", label: "Female building7", id: "fe_building7", name: "fe_building7"},
                                {view: "text", label: "Female building8", id: "fe_building8", name: "fe_building8"},
                                {view: "text", label: "Female building9", id: "fe_building9", name: "fe_building9"},
                                {view: "text", label: "Female building10", id: "fe_building10", name: "fe_building10"},
                            ]
                        },
                        {
                            rows: [
                                {view: "text", label: "Male building1", id: "ma_building1", name: "ma_building1"},
                                {view: "text", label: "Male building2", id: "ma_building2", name: "ma_building2"},
                                {view: "text", label: "Male building3", id: "ma_building3", name: "ma_building3"},
                                {view: "text", label: "Male building4", id: "ma_building4", name: "ma_building4"},
                                {view: "text", label: "Male building5", id: "ma_building5", name: "ma_building5"},
                                {view: "text", label: "Male building6", id: "ma_building6", name: "ma_building6"},
                                {view: "text", label: "Male building7", id: "ma_building7", name: "ma_building7"},
                                {view: "text", label: "Male building8", id: "ma_building8", name: "ma_building8"},
                                {view: "text", label: "Male building9", id: "ma_building9", name: "ma_building9"},
                                {view: "text", label: "Male building10", id: "ma_building10", name: "ma_building10"},
                            ]
                        },
                    ],
                },
                {view: "label", label: "cut of farm"},
                {
                    cols: [
                        {view: "datepicker", name: "end_date", id: "end_date", placeholder: "End Date"},
                        {view: "text", name: "out_type", id: "out_type", placeholder: "Out Type"},
                        {view: "text", name: "out_company", id: "out_company", placeholder: "Out Company"},
                    ]
                },
                {
                    cols: [
                        {}, {view: "button", value: "Save"},
                        {view: "button", value: "Cancel"}
                    ]
                },
            ],
            elementsConfig: {
                labelWidth: 120,
                margin: 10
            }
        },
    });
    const breed_label = {
        view: "label",
        template: "Breed Information",
        css: {
            "font-size": "24px"
        }
    };
    const breed_register_header = {
        cols : [
            {
                view: "label",
                label: "Register breed"
            },
            {},
            { 
                type: "section",
                borderless: true,
                cols:[
                    {}, { view:"icon", icon:"mdi mdi-printer"},{ view:"icon", icon:"mdi mdi-folder-upload"},{ view:"icon", icon:"mdi mdi-folder-download"}
                ]
            },
        ]
    };
    const breed_label_list = {
        type: "section",
        cols: [
            { view: "label", label: "biotype", gravity: 0.1 },
            { view: "label", label: "breedtype", gravity: 0.1 },
            { view: "label", label: "partner", gravity: 0.1 },
            { view: "label", label: "start_date", gravity: 0.1 },
            { view: "label", label: "biocode", gravity: 0.1 },
            { view: "label", label: "female_head", gravity: 0.1 },
            { view: "label", label: "male_head", gravity: 0.1 },
            { view: "label", label: "start_weekage", gravity: 0.1 },
            { gravity: 0.1}
        ],
        css: {
            "background": "lightgrey!important",
            "text-align": "center"
        }
    };
    const breed_register_form = {
        view: "form",
        id: "breed_register_form",
        margin: 10,
        borderless: true,
        cols: [
            { view: "richselect", placeholder: "biotype", id: "biotype", name: "biotype", gravity: 0.1, options: ["egg", "meet"]},
            { view: "richselect", placeholder: "breedtype", id: "breedtype", name: "breedtype", gravity: 0.1, options: ["order", "own"]},
            { view: "text", placeholder: "partner", id: "partner1", name: "partner", gravity: 0.1 },
            { view: "datepicker", placeholder: "start_date", id: "start_date", name: "start_date", gravity: 0.1 },
            { view: "richselect", placeholder: "biocode", id: "biocode", name: "biocode", gravity: 0.1, options: ["AA", "BB", "AB"]},
            { view: "text", placeholder: "female_head", id: "female_head", name: "female_head", gravity: 0.1, attributes:{type:"number"} },
            { view: "text", placeholder: "male_head", id: "male_head", name: "male_head", gravity: 0.1, attributes:{type:"number"} },
            { view: "text", placeholder: "start_weekage", id: "start_weekage", name: "start_weekage", gravity: 0.1, attributes:{type:"number"} },
            { 
                rows: [
                    {
                        view: "button", value: "register", css: "webix-primary",
                        click: function(){
                            if ($$("breed_register_form").validate()) {
                                const val = $$("breed_register_form").getValues();
                                webix.ajax().post(schedulerUrl + "breeds/register", {
                                    user_idx: user.id,
                                    farm_idx: sessionStorage.getItem("user_group_idx"),
                                    biotype: val.biotype,
                                    breedtype: val.breedtype,
                                    partner: val.partner,
                                    date: val.start_date,
                                    biocode: val.biocode,
                                    female_head: val.female_head,
                                    male_head: val.male_head,
                                    start_weekage: val.start_weekage,
                                    end_weekage: "0"
                                }).then(function(data) {
                                    if (data.text() != "") {
                                        webix.alert({ title: "Register Breed", type: "alert-success", text: "Register a breed successfully!" }).then(function() {
                                            refresh_breed_grid();
                                            $$("breed_register_form").clear();
                                        })
                                    }
                                    else {
                                        webix.alert({ title: "Some input values are not Correct \n Please try again", type: "alert-warning" })
                                    }
                                })
                            }
                        }
                    },
                    {}
                ],
                gravity: 0.1,
                css: {
                    "margin": "auto!important",
                    "padding": "20px"
                }
            },
        ],
        rules: {
            $all:webix.rules.isNotEmpty,
        }
    };
    const breed_list_label = {
        view: "label",
        label: "List of breed"
    };
    const breed_datatable = {
        view:"datatable",
        id: "grid",
        autoConfig:true,
        columns:[
            { id:"id", header:"#", width: 50 },
            { id:"uuid",	header:"Breed Code", fillspace:true },
            { id:"biotype",	header:"Bio Type", fillspace:true  },
            { id:"breedtype",	header:"Breed Type", fillspace:true  },
            { id:"partner",	header:"Partner", fillspace:true  },
            { id:"date",	header:"Date", fillspace:true  },
            { id:"biocode",	header:"Bio Code", fillspace:true  },
            { id:"female_head",	header:"Female Head", fillspace:true  },
            { id:"male_head",	header:"Male Head", fillspace:true  },
            { id:"start_weekage",	header:"Start Weekage", fillspace:true  },
        ],
        url:function(params){
            var user_id = sessionStorage.getItem("user_id");
            var user_group_idx = sessionStorage.getItem("user_group_idx");
            var data = webix.ajax().sync().get(schedulerUrl + "breeds/all", {
                uID: user.id,
                fID: user_group_idx
            }).responseText;
            if (data != "0") {
                sessionStorage.setItem("breed_code", JSON.parse(data)[0].uuid);
                this.parse(data);
            }
        },
        scroll:"y",
        onClick:{
            "wxi-trash":function(event, id, node){
                webix.ajax().del(schedulerUrl + "breeds/remove?id=" + id.row).then(function(result) {
                    if (result.text() != "") {
                        refresh_breed_grid();
                    }
                })
            },
            "wxi-pencil":function(event, id, node){
                webix.ajax().get(schedulerUrl + "breeds/select", {id: id.row}).then(function(result) {
                    const breed = JSON.parse(result.text());
                    breed_details.show();
                })
            }
        }
    };
    const register_breed_page = {
        view: "form",
        id: "register-breed",
        elements: [
            {
                type: "section",
                borderless: false,
                rows: [
                    breed_label,
                    breed_register_header,
                    breed_label_list,
                    breed_register_form,
                    breed_list_label,
                    breed_datatable,
                ]
            }
        ],
    };
    // ----------- Register Breed page End ----------------
    // ----------- Register Worker page Start ----------------
    const register_worker_label = {
        view: "label",
        template: "Register worker authority",
        css: {
            "font-size": "24px"
        }
    }
    const register_worker_header = {
        cols : [
            {
                view: "label",
                label: "Register"
            },
            {}
        ]
        
    }
    const register_worker_label_list = {
        type: "section",
        cols: [
            { view: "label", label: "user name", gravity: 0.1 },
            { view: "label", label: "job name", gravity: 0.1 },
            { view: "label", label: "user id", gravity: 0.1 },
            { view: "label", label: "user pass", gravity: 0.1 },
            { view: "label", label: "mobile", gravity: 0.1 },
            { view: "label", label: "rule_idx", gravity: 0.4 },
            { gravity: 0.1 },
        ],
        css: {
            "background": "lightgrey!important",
            "text-align": "center"
        }
    }
    const register_worker_form = {
        view: "form",
        id: "register_worker_form",
        margin: 10,
        borderless: true,
        cols: [
            { rows: [{ view: "text", placeholder: "user name", id: "user_name1", name: "user_name" }, {}], gravity: 0.1},
            { rows: [{ view: "text", placeholder: "job name", id: "job_name", name: "job_name" }, {}], gravity: 0.1 },
            { rows: [{ 
                cols: [
                    {
                        view: "text", placeholder: "user id", id: "user_id1", name: "user_id" , gravity: 0.8, readonly: true,
                    },
                    {
                        view: "button", value: "cb", gravity: 0.2,
                        click: function() {
                            
                            webix.ajax().post(schedulerUrl + "workers/generate_name", {
                                user_id: user.user_id
                            }).then(function(data) {
                                $$("user_id1").setValue(data.text());    
                            })
                        }
                    }
                ]
                
            }, {}], gravity: 0.1 },
            { rows: [{ view: "text", placeholder: "user pass", id: "user_pass1", name: "user_pass" }, {}], gravity: 0.1 },
            { rows: [{ view: "text", placeholder: "mobile", id: "mobile1", name: "mobile", pattern: { mask: "###-####-####", allow: /[0-9]/g }}, {}], gravity: 0.1 },
            {
                type: "section",
                scroll: "y",
                rows: [
                    {
                        view:"flexlayout",
                        cols: [
                            { 
                                view: "checkbox", id: "all_check", name: "all_check", labelRight: "all", labelWidth: 0, minWidth: 60 , value: 0,
                                on: {
                                    onChange: function(newValue, oldValue, config) {
                                        for (let index = 1; index < 13; index++) {
                                            if (newValue == 1) {
                                                $$("check"+index).disable();
                                                $$("check"+index).setValue(oldValue);
                                            }
                                            else 
                                                $$("check"+index).enable();
                                        }
                                    }
                                }
                            },
                            { view: "checkbox", id: "check1", name: "check1", labelRight: "bd1", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check2", name: "check2", labelRight: "bd2", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check3", name: "check3", labelRight: "bd3", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check4", name: "check4", labelRight: "bd4", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check5", name: "check5", labelRight: "bd5", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check6", name: "check6", labelRight: "bd6", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check7", name: "check7", labelRight: "bd7", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check8", name: "check8", labelRight: "bd8", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check9", name: "check9", labelRight: "bd9", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check10", name: "check10", labelRight: "bd10", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check11", name: "check11", labelRight: "bd11", labelWidth: 0, minWidth: 60, value: 0 },
                            { view: "checkbox", id: "check12", name: "check12", labelRight: "bd12", labelWidth: 0, minWidth: 60, value: 0 },
                        ],
                        
                        autoHeight: true,
                    },
                ],
                gravity: 0.4,
            },
            { 
                rows: [
                    {
                        view: "button", value: "register", css: "webix-primary",
                        click: function(){
                            if ($$("register_worker_form").validate()) {
                                const val = $$("register_worker_form").getValues();
                                const user_group_idx = JSON.parse(sessionStorage.getItem("user_group_idx"));
                                var check_values = [];
                                for (let index = 1; index < 13; index++) {
                                    check_values.push(val["check" + index]);
                                }
                                webix.ajax().post(schedulerUrl + "workers/register", {
                                    user_id: val.user_id,
                                    user_name: val.user_name,
                                    user_pass: val.user_pass,
                                    job_name: val.job_name,
                                    user_group: "1",
                                    user_group_idx: user_group_idx,
                                    mobile: val.mobile,
                                    check_values: check_values,
                                    all_check: val.all_check,
                                    giver_idx: user.id
                                }).then(function(data) {
                                    const response = data.text();
                                    if (response == "success") {
                                        webix.alert({ title: "Register Worker", type: "alert-success", text: "Register a worker successfully!" }).then(function (result){
                                            refresh_worker_grid();
                                            $$("register_worker_form").clear();
                                        })
                                    } else {
                                        webix.alert({ title: "Some input values are not Correct \n Please try again", type: "alert-warning"})
                                    }
                                })
                            }
                        }
                    },
                    {}
                ],
                gravity: 0.1,
                css: {
                    "margin": "auto!important",
                    "padding": "20px"
                }
            },
        ],
        rules: {
            $all:webix.rules.isNotEmpty,
        },
        gravity: 0.2
    }
    const register_worker_list_label = {
        view: "label",
        label: "List of workers"
    }
    const register_worker_datatable = {
        view:"datatable",
        id: "worker_grid",
        autoConfig:true,
        columns:[
            { id:"id", header:"#", width: 50 },
            { id:"user_name",	header:"user_name", fillspace:true },
            { id:"job_name",	header:"job_name", fillspace:true  },
            { id:"user_id",	header:"user_id", fillspace:true  },
            { id:"user_pass",	header:"user_pass", fillspace:true  },
            { id:"mobile",	header:"mobile", fillspace:true  },
            // { id:"rule_idx",	header:"rule_idx", fillspace:true  },
        ],
        url:function(params){
            var user_id = sessionStorage.getItem("user_id");
            var user_group_idx = sessionStorage.getItem("user_group_idx");
            var data = webix.ajax().sync().get(schedulerUrl + "workers/all", {
                uID: user.id,
                fID: user_group_idx
            }).responseText;
            if (data != "0") {
                this.parse(data);
            }
        },
        scroll:"y",
        onClick:{
            "wxi-trash":function(event, id, node){
                webix.ajax().del(schedulerUrl + "workers/remove?id=" + id.row).then(function(result) {
                    if (result.text() != "") {
                        refresh_worker_grid();
                    }
                })
            },
            "wxi-pencil":function(event, id, node){
                webix.ajax().get(schedulerUrl + "workers/select", {id: id.row}).then(function(result) {
                    console.log(result.text());
                })
            }
        }
    };
    const register_worker_page = {
        view: "form",
        id: "register-worker",
        elements: [
            {
                type: "section",
                borderless: false,
                rows: [
                    register_worker_label,
                    register_worker_header,
                    register_worker_label_list,
                    register_worker_form,
                    register_worker_list_label,
                    register_worker_datatable,
                ]
            }
        ],
    };

    // ----------- Register Worker page End ----------------
    // ----------- Register Nutri page Start ----------------
    const register_nutri_label = {
        view: "label",
        template: "Medicine Investory",
        css: {
            "font-size": "24px"
        }
    }
    const register_nutri_header = {
        cols : [
            {
                view: "label",
                label: "Register"
            },
            {}
        ]
        
    }
    const register_nutri_label_list = {
        type: "section",
        cols: [
            { view: "label", label: "name(code)", gravity: 0.1 },
            { view: "label", label: "date", gravity: 0.1 },
            { view: "label", label: "med_type", gravity: 0.1 },
            { view: "label", label: "measure_unit", gravity: 0.1 },
            { view: "label", label: "measure", gravity: 0.1 },
            { view: "label", label: "in_qnty", gravity: 0.1 },
            { view: "label", label: "unit_price", gravity: 0.1 },
            { view: "label", label: "max_qnty", gravity: 0.1 },
            { gravity: 0.1 },
        ],
        css: {
            "background": "lightgrey!important",
            "text-align": "center"
        }
    }
    const register_nutri_form = {
        view: "form",
        id: "register_nutri_form",
        margin: 10,
        borderless: true,
        cols: [
            { view: "text", placeholder: "name", id: "code", name: "code" , gravity: 0.1},
            { view: "datepicker", placeholder: "date", id: "date2", name: "date" , gravity: 0.1 },
            { view: "richselect", placeholder: "med_type", id: "med_type", name: "med_type", gravity: 0.1, options: ["medi", "non-medi", "food-nutri"]},
            { view: "text", placeholder: "measure_unit", id: "measure_unit", name: "measure_unit" , gravity: 0.1, attributes:{type:"number"}},
            { view: "richselect", placeholder: "measure", id: "measure", name: "measure", gravity: 0.1, options: ["ml", "l", "gram", "kg", "pcs"]},
            { view: "text", placeholder: "in_qnty", id: "in_qnty", name: "in_qnty" , gravity: 0.1, attributes:{type:"number"}},
            { view: "text", placeholder: "unit_price", id: "unit_price", name: "unit_price" , gravity: 0.1, attributes:{type:"number"}},
            { view: "text", placeholder: "max_qnty", id: "max_qnty", name: "max_qnty" , gravity: 0.1, attributes:{type:"number"}},
            { 
                rows: [
                    {
                        view: "button", value: "register", css: "webix-primary",
                        click: function(){
                            if ($$("register_nutri_form").validate()) {
                                const val = $$("register_nutri_form").getValues();
                                const user_group_idx = JSON.parse(sessionStorage.getItem("user_group_idx"));
                                const breed_code = JSON.parse(sessionStorage.getItem("breed_code"));

                                webix.ajax().post(schedulerUrl + "mednutri/register", {
                                    user_idx: user.id,
                                    farm_idx: user_group_idx,
                                    breed_code: breed_code,
                                    code: val.code,
                                    date: val.date,
                                    med_type: val.med_type,
                                    measure_unit: val.measure_unit,
                                    measure: val.measure,
                                    in_qnty: val.in_qnty,
                                    unit_price: val.unit_price,
                                    max_qnty: val.max_qnty
                                }).then(function(data) {
                                    const response = data.text();
                                    if (response == "success") {
                                        webix.alert({ title: "Register Nutri", type: "alert-success", text: "Register a nutri successfully!" }).then(function (result){
                                            $$("register_nutri_form").clear();
                                        })
                                    } else {
                                        webix.alert({ title: "Some input values are not Correct \n Please try again", type: "alert-warning"})
                                    }
                                })
                            }
                        }
                    },
                    {}
                ],
                gravity: 0.1,
                css: {
                    "margin": "auto!important",
                    "padding": "20px"
                }
            },
        ],
        rules: {
            $all:webix.rules.isNotEmpty,
        },
        gravity: 0.2
    }
    const register_nutri_list_label = {
        view: "label",
        label: "List of medi"
    }
    const register_nutri_label_list1 = {
        type: "section",
        cols: [
            { view: "label", label: "name", gravity: 0.1 },
            { view: "label", label: "date", gravity: 0.1 },
            { view: "label", label: "invetory", gravity: 0.4 },
            { view: "label", label: "amount", gravity: 0.2 },
            { gravity: 0.1 },
            { gravity: 0.1 },
        ],
        css: {
            "background": "lightgrey!important",
            "text-align": "center"
        }
    }
    const register_nutri_list = {
        view:"dataview",
        css: "movies",
        type:{
            width: 260,
            height: 90,
            template:"html->template_container"
        },
        url: function(params){
            var user_id = sessionStorage.getItem("user_id");
            var user_group_idx = sessionStorage.getItem("user_group_idx");
            var breed_code = sessionStorage.getItem("breed_code");
            var data = webix.ajax().sync().get(schedulerUrl + "mednutri/all", {
                uID: user.id,
                fID: user_group_idx,
                bCode: breed_code
            }).responseText;
            console.log(data);
            return data;
        }
    }
    const register_nutri_page = {
        view: "form",
        id: "register-nutri",
        elements: [
            {
                type: "section",
                borderless: false,
                rows: [
                    register_nutri_label,
                    register_nutri_header,
                    register_nutri_label_list,
                    register_nutri_form,
                    register_nutri_list_label,
                    register_nutri_label_list1,
                    register_nutri_list,
                    {
                        template: "non-medi list label"
                    },
                    {
                        template: "non-medi label list"
                    },
                    {
                        template: "non-medi list"
                    },
                    {
                        template: "food nutri list label"
                    },
                    {
                        template: "food nutri label list"
                    },
                    {
                        template: "food nutri list"
                    },
                ]
            }
        ],
    };
    // ----------- Register Nutri page End ----------------
    // ----------- Register Food page Start ----------------
    const register_food_label = {
        view: "label",
        template: "Food Investory",
        css: {
            "font-size": "24px"
        }
    }
    const register_food_header = {
        cols : [
            {
                view: "label",
                label: "Food Register"
            },
            {}
        ]
        
    }
    const register_food_label_list = {
        type: "section",
        cols: [
            { view: "label", label: "food name", gravity: 0.1 },
            { view: "label", label: "sex", gravity: 0.1 },
            { view: "label", label: "date", gravity: 0.1 },
            { view: "label", label: "in_kg", gravity: 0.1 },
            { view: "label", label: "unit_price", gravity: 0.1 },
            { view: "label", label: "tank_max", gravity: 0.1 },
            { view: "label", label: "nutrition_name", gravity: 0.1 },
            { view: "label", label: "nutrition_in_kg", gravity: 0.1 },
            { gravity: 0.1 },
        ],
        css: {
            "background": "lightgrey!important",
            "text-align": "center"
        }
    }
    const register_food_form = {
        view: "form",
        id: "register_food_form",
        margin: 10,
        borderless: true,
        cols: [
            { view: "text", placeholder: "name", id: "food_name", name: "code" , gravity: 0.1},
            { view: "richselect", placeholder: "Sex", id: "sex", name: "sex", gravity: 0.1, options: [{id: 1, value: "female"}, {id: 2, value: "male"}]},
            { view: "datepicker", placeholder: "date", id: "date3", name: "date" , gravity: 0.1 },
            { view: "text", placeholder: "in_kg", id: "in_kg", name: "in_kg" , gravity: 0.1, attributes:{type:"number"}},
            { view: "text", placeholder: "unit_price", id: "unit_price1", name: "unit_price" , gravity: 0.1, attributes:{type:"number"}},
            { view: "text", placeholder: "tank_max", id: "tank_max", name: "tank_max" , gravity: 0.1, attributes:{type:"number"}},
            { view: "multiselect", placeholder: "nutrition_name", id: "nutrition_name", name: "nutrition_name", gravity: 0.1, options: ["nut1", "nut2", "nut3", "nut4"]},
            { view: "text", placeholder: "nutrition_in_kg", id: "nutrition_in_kg", name: "nutrition_in_kg" , gravity: 0.1, attributes:{type:"number"}},
            { 
                rows: [
                    {
                        view: "button", value: "register", css: "webix-primary",
                        click: function(){
                            if ($$("register_food_form").validate()) {
                                const val = $$("register_food_form").getValues();
                                const user_group_idx = JSON.parse(sessionStorage.getItem("user_group_idx"));
                                const breed_code = JSON.parse(sessionStorage.getItem("breed_code"));

                                webix.ajax().post(schedulerUrl + "foods/register", {
                                    user_idx: user.id,
                                    farm_idx: user_group_idx,
                                    breed_code: breed_code,
                                    date: val.date,
                                    code: val.code,
                                    in_kg: val.in_kg,
                                    unit_price: val.unit_price,
                                    sex: val.sex,
                                    tank_max: val.tank_max,
                                    nutrition_name: val.nutrition_name,
                                    nutrition_in_kg: val.nutrition_in_kg
                                }).then(function(data) {
                                    const response = data.text();
                                    if (response == "success") {
                                        webix.alert({ title: "Register Food", type: "alert-success", text: "Register a food successfully!" }).then(function (result){
                                            $$("register_food_form").clear();
                                        })
                                    } else {
                                        webix.alert({ title: "Some input values are not Correct \n Please try again", type: "alert-warning"})
                                    }
                                })
                            }
                        }
                    },
                    {}
                ],
                gravity: 0.1,
                css: {
                    "margin": "auto!important",
                    "padding": "20px"
                }
            },
        ],
        rules: {
            $all:webix.rules.isNotEmpty,
        },
        gravity: 0.2
    }
    const register_food_list_label = {
        view: "label",
        label: "Food List"
    }
    const register_food_label_list1 = {
        type: "section",
        cols: [
            { view: "label", label: "food name", gravity: 0.1 },
            { view: "label", label: "date", gravity: 0.1 },
            { view: "label", label: "invetory", gravity: 0.4 },
            { view: "label", label: "amount", gravity: 0.2 },
            { gravity: 0.1 },
            { gravity: 0.1 },
        ],
        css: {
            "background": "lightgrey!important",
            "text-align": "center"
        }
    }
    const register_food_list = {
        view:"dataview",
        css: "movies",
        type:{
            width: 260,
            height: 90,
            template:"html->template_container"
        },
        url: function(params){
            var user_id = sessionStorage.getItem("user_id");
            var user_group_idx = sessionStorage.getItem("user_group_idx");
            var breed_code = sessionStorage.getItem("breed_code");
            var data = webix.ajax().sync().get(schedulerUrl + "foods/all", {
                uID: user.id,
                fID: user_group_idx,
                bCode: breed_code
            }).responseText;
            console.log(data);
            return data;
        }
    }
    const register_food_page = {
        view: "form",
        id: "register-food",
        elements: [
            {
                type: "section",
                borderless: false,
                rows: [
                    register_food_label,
                    register_food_header,
                    register_food_label_list,
                    register_food_form,
                    register_food_list_label,
                    register_food_label_list1,
                    register_food_list,
                ]
            }
        ],
    };
    // ----------- Register Food page End ----------------
    // ----------- Manage feed first page Start ----------------
    const feed_label = {
        view: "label",
        label: "Feeding each building",
        css: {
            "font-size": "20px",
            "font-weight": "bold"
        }
    }
    const datepicker = {
        view: "datepicker",
		id: "date",
        value: new Date(2012, 6, 8),
        format: "%Y, %m-%d %l",
        timepicker: true,
        width: 300,
        on:{
            onChange:function(nv, ov){
                webix.message("Value was "+ov+" <br>Value now "+nv);
            },
        }
    };
    const save_button = {
        view: "button",
        label: "Save",
        id: "save_button"
    }
    const panel = {
        view: "panel",
        body: {
            padding: 20,
            rows: [
                {
                    cols: [
                        {
                            view: "template",
                            name: "$value",
                            template: "<span style='border-radius: 50%; padding: 5px; background: lightgrey;'>#month#</span>",
                            css: {
                                "border": "none!important;"
                            }
                        },
                        {
                            view: "switch", value: 1,
                            gravity: 0.25,
                            on: {
                                onChange: function (newValue, oldValue, config) {
									const male_feed = this.getParentView().getParentView().getChildViews()[7];
									const female_feed = this.getParentView().getParentView().getChildViews()[5];
									if (newValue == 0) {
										male_feed.disable();
										female_feed.disable();
									} else {
										male_feed.enable();
										female_feed.enable();
									}	
								}
                            }
                        }
                    ]
                },
                { height: 20 },
                {
                    cols: [
                        {
                            view: "label",
                            template: "<input style='color: blue; width: 50px; margin: auto; text-align: center' value='100'/><div>male feed</div>",
                            align: "center",
                            css: "borderR"
                        },
                        {
                            view: "label",
                            template: "<input style='color: blue; width: 50px; margin: auto; text-align: center' value='100'/><div>female feed</div>",
                            align: "center",
                            css: "borderR"
                        },
                        {
                            view: "label",
                            template: "<div style='color: blue'>200</div><div>total feed</div>",
                            align: "center",
                        },
                    ],
                    css: {
                        "padding": "10px",
                        "background": "lightgrey",
                        "width": "auto!important",
                        "margin-right": "20px"
                    }
                },
                { height: 80 },
                {
                    view: "label",
                    label: "female-feed-graph",
                },
                { view: "slider", value: "50", min: 0, max: 100, title: "#value#", css: "female-feed" },
                {
                    view: "label",
                    label: "male-feed-graph",
                },
                { view: "slider", value: "50", min: 0, max: 100, title: "#value#", css: "male-feed" }
            ],
            height: 400
        },
        minWidth: 330,
        minHeight: 400
    }
    const panels = {
        margin: 10, padding: 0,
        view: "flexdatalayout",
        cols: [panel],
        url: "https://docs.webix.com/samples/60_pro/13_layout/data/year.js"
    }
	const manage_feed1 = {
			view: "form",
			id: "manage-feed",
			elements: [
				{
					cols: [
						feed_label,
						{},
						{ view:"icon", icon:"wxi-angle-left", id:"prev", click: function(){ 
							changeRange(-1);
						}},
						datepicker,
						{ view:"icon", icon:"wxi-angle-right", id:"next", click: function(){
							changeRange(1);
						}},
						{},
						save_button
					]
				},
				{
					view: "label",
					label: "Info feeding"
				},
				{
					view: "scrollview",
					body: webix.copy(panels)
				}
			]
		};
	// ----------- Manage feed first page End ----------------
    // ----------- Supply water page Start ----------------
    const water_label = {
        view: "label",
        label: "Supply water each building",
        css: {
            "font-size": "20px",
            "font-weight": "bold"
        }
    }
    const datepicker1 = {
        view: "datepicker",
		id: "date1",
        value: new Date(2012, 6, 8),
        format: "%Y, %m-%d %l",
        timepicker: true,
        width: 300
    };
    const save_button1 = {
        view: "button",
        label: "Save",
        id: "save_button1"
    }
    const water_panel = {
        view: "panel",
        body: {
            padding: 20,
            rows: [
                {
                    cols: [
                        {
                            view: "template",
                            name: "$value",
                            template: "<span style='border-radius: 50%; padding: 5px; background: lightgrey;'>#month#</span>",
                            css: {
                                "border": "none!important;"
                            }
                        },
                        {
                            view: "switch", value: 1,
                            gravity: 0.25,
                            on: {
                                onChange: function (newValue, oldValue, config) {
									const male_feed = this.getParentView().getParentView().getChildViews()[7];
									const female_feed = this.getParentView().getParentView().getChildViews()[5];
									if (newValue == 0) {
										male_feed.disable();
										female_feed.disable();
									} else {
										male_feed.enable();
										female_feed.enable();
									}	
								}
                            }
                        }
                    ]
                },
                { height: 20 },
                {
                    cols: [
                        {
                            view: "label",
                            template: "<input style='color: blue; width: 50px; margin: auto; text-align: center' value='100'/><div>male feed</div>",
                            align: "center",
                            css: "borderR"
                        },
                        {
                            view: "label",
                            template: "<input style='color: blue; width: 50px; margin: auto; text-align: center' value='100'/><div>female feed</div>",
                            align: "center",
                            css: "borderR"
                        },
                        {
                            view: "label",
                            template: "<div style='color: blue'>200</div><div>total feed</div>",
                            align: "center",
                        },
                    ],
                    css: {
                        "padding": "10px",
                        "background": "lightgrey",
                        "width": "auto!important",
                        "margin-right": "20px"
                    }
                },
                { height: 80 },
                {
                    view: "label",
                    label: "female-feed-graph",
                },
                { view: "slider", value: "50", min: 0, max: 100, title: "#value#", css: "female-feed" },
                {
                    view: "label",
                    label: "male-feed-graph",
                },
                { view: "slider", value: "50", min: 0, max: 100, title: "#value#", css: "male-feed" }
            ],
            height: 400
        },
        minWidth: 330,
        minHeight: 400
    }
    const water_panels = {
        margin: 10, padding: 0,
        view: "flexdatalayout",
        cols: [water_panel],
        url: "https://docs.webix.com/samples/60_pro/13_layout/data/year.js"
    }
	const supply_water = {
			view: "form",
			id: "supply-water",
			elements: [
				{
					cols: [
                        water_label,
						{},
						{ view:"icon", icon:"wxi-angle-left", id:"prev1", click: function(){ 
							changeRange1(-1);
						}},
						datepicker1,
						{ view:"icon", icon:"wxi-angle-right", id:"next1", click: function(){
							changeRange1(1);
						}},
						{},
						save_button1
					]
				},
				{
					view: "label",
					label: "Info water"
				},
				{
					view: "scrollview",
					body: webix.copy(water_panels)
				}
			]
		};
	// ----------- Supply water page End ----------------
    webix.ui({
        view:"popup",
        id:"bell_pop",
        body:{
            view:"list",
            width:320,
            height:600,
            template:"#rank#. #title# <div style='padding-left:18px'> Year:#year#, votes:#votes# </div>",
            type:{
                height:62
            },
            select:true,
            data:big_film_set
        },
    }).hide();

    webix.ready(function () {
		if (!user) {
			window.location.href = "login";
		} else {
            sessionStorage.setItem("user_id", user.id);
        }

        webix.ui({
			rows: [
				{
					view: "toolbar", padding: 3, elements: [
						{
							view: "icon", icon: "mdi mdi-menu", click: function () {
								$$("menu_list").toggle();
							}
						},
						{ view: "label", label: "DonilFarm" },
						{},
						{ view: "button", label: "CCTV", gravity: 0.3 },
						{ view: "button", label: "scheduler", gravity: 0.3 },
						{
							view: "icon",
							icon: "mdi mdi-calendar-clock",
							tooltip: "스케줄보기",
							click: function () {
								location.href = "/scheduler";
							}
						},
						{ view: "button", label: "myInfo", gravity: 0.3 },
						{ view: "icon", icon: "mdi mdi-comment", badge: 4 },
						{ view: "icon", id: "bell_icon", icon: "mdi mdi-bell", popup:"bell_pop"}
					]
				},
				{
					cols: [
						sidebar,
						{
							id: "multi",
							animate: false,
							cells: [
								{
									id: "dashboard1",
									template: "dashboard"
								},
								manage_feed1,
                                register_farm_page,
                                register_breed_page,
                                register_worker_page,
                                register_nutri_page,
                                register_food_page,
                                supply_water,
							]
						}

					]
				},

			]
		});

        $$("bell_icon").config.badge = big_film_set.length;
        $$("bell_icon").refresh();
        var columns = $$("grid").config.columns;
        if (columns.length > 3) {
            columns.splice(columns.length, 0,{
                id:"trash",
                header:"Delete",
                template: "{common.trashIcon()}"
            });
            $$("grid").refreshColumns();

            columns.splice(columns.length-1, 0,{
                id:"edit",
                header:"Edit",
                template: "{common.editIcon()}"
            });
            $$("grid").refreshColumns();
        }

        var columns1 = $$("worker_grid").config.columns;
        if (columns1.length > 3) {
            columns1.splice(columns1.length, 0,{
                id:"trash",
                header:"Delete",
                template: "{common.trashIcon()}"
            });
            $$("worker_grid").refreshColumns();

            columns1.splice(columns1.length-1, 0,{
                id:"edit",
                header:"Edit",
                template: "{common.editIcon()}"
            });
            $$("worker_grid").refreshColumns();
        }
    });

	function changeRange(sign){
		const oldValue = $$("date").getValue();

		let newValue = webix.Date.add(oldValue, sign, "day");
		$$("date").setValue(newValue);

        webix.message("Value was "+oldValue+" <br>Value now "+newValue);
	}

    function changeRange1(sign){
		const date = $$("date1").getValue();

		let new_date = webix.Date.add(date, sign, "day");
		$$("date1").setValue(new_date);
	}

    function refresh_breed_grid() {
        var user_id = sessionStorage.getItem("user_id");
        var user_group_idx = sessionStorage.getItem("user_group_idx");
        var data = webix.ajax().sync().get(schedulerUrl + "breeds/all", {
            uID: user_id,
            fID: user_group_idx
        }).responseText;
        
        $$("grid").clearAll();
        if (data != "0") {
            $$("grid").parse(JSON.parse(data));
            $$("grid").refresh();
        }
    }

    function refresh_worker_grid() {
        var user_id = sessionStorage.getItem("user_id");
        var user_group_idx = sessionStorage.getItem("user_group_idx");
        var data = webix.ajax().sync().get(schedulerUrl + "workers/all", {
            uID: user_id,
            fID: user_group_idx
        }).responseText;
        
        $$("worker_grid").clearAll();
        if (data != "0") {
            $$("worker_grid").parse(JSON.parse(data));
            $$("worker_grid").refresh();
        }
    }
</script>
</body>

</html>